{% extends "base.html" %}

{% block content %}
<div class="header-section">
    <h1 class="header-title">PCA - Dimensionality Reduction</h1>
    <p class="header-subtitle">Reduce dimensions while preserving information using eigenvalues and eigenvectors</p>
</div>

<div class="glass-card" style="background: rgba(6, 182, 212, 0.05); border-left: 4px solid var(--accent);">
    <h3>ðŸ“Š Principal Component Analysis</h3>
    <p style="color: var(--text-muted); line-height: 1.6;">
        PCA finds the directions (principal components) where data varies the most. It's eigenvalue decomposition 
        applied to the covariance matrix! Used in image compression, feature extraction, and data visualization.
    </p>
</div>

<div class="glass-card">
    <div class="control-panel" style="grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));">
        <div class="input-group">
            <h3>Data Pattern</h3>
            <select id="dataType" class="input-field">
                <option value="ellipse">Ellipse (2D)</option>
                <option value="diagonal">Diagonal Line</option>
                <option value="circular">Circular</option>
                <option value="3d">3D Helix</option>
            </select>
        </div>

        <div class="input-group">
            <h3>Number of Points</h3>
            <input type="number" id="nPoints" value="100" min="50" max="500" class="input-field">
        </div>

        <div class="input-group">
            <h3>Components to Keep</h3>
            <input type="number" id="nComponents" value="1" min="1" max="3" class="input-field">
        </div>

        <div class="input-group" style="display: flex; align-items: flex-end;">
            <button class="btn-primary" onclick="performPCA()" style="width: 100%;">
                Analyze with PCA
            </button>
        </div>
    </div>
</div>

<div class="glass-card">
    <h3>Original Data with Principal Components</h3>
    <div id="pcaPlot" class="viz-container" style="height: 500px;"></div>
</div>

<div class="glass-card">
    <h3>Variance Explained</h3>
    <div id="variancePlot" class="viz-container" style="height: 300px;"></div>
</div>

<div class="glass-card">
    <h3>PCA Results</h3>
    <div id="pcaResults" style="margin-top: 1rem;">
        <p style="color: var(--text-muted);">Run PCA to see results...</p>
    </div>
</div>

<div class="glass-card">
    <h3>Understanding PCA</h3>
    <div style="margin-top: 1rem; line-height: 1.8; color: var(--text-muted);">
        <p><strong style="color: var(--text-main);">Principal Components:</strong> Directions of maximum variance (eigenvectors of covariance matrix)</p>
        <p><strong style="color: var(--text-main);">Explained Variance:</strong> How much information each component captures (eigenvalues)</p>
        <p><strong style="color: var(--text-main);">Dimensionality Reduction:</strong> Keep top k components, discard the rest</p>
        <p><strong style="color: var(--text-main);">Applications:</strong> Image compression (JPEG), face recognition, data visualization</p>
        <p><strong style="color: var(--text-main);">Connection to Eigenvalues:</strong> PCA = eigendecomposition of covariance matrix!</p>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/visualizers/pca.js') }}"></script>
{% endblock %}
