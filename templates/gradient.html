{% extends "base.html" %}

{% block content %}
<div class="header-section">
    <h1 class="header-title">Gradient Descent Optimization</h1>
    <p class="header-subtitle">Watch how AI learns by following gradients downhill to find optimal solutions</p>
</div>

<div class="glass-card" style="background: rgba(59, 130, 246, 0.05); border-left: 4px solid var(--primary);">
    <h3>ðŸ’¡ AI Connection</h3>
    <p style="color: var(--text-muted); line-height: 1.6;">
        Gradient descent is the fundamental optimization algorithm used in training neural networks, 
        linear regression, and virtually all machine learning models. It finds the minimum of a function 
        by iteratively moving in the direction of steepest descent (negative gradient).
    </p>
</div>

<div class="glass-card">
    <div class="control-panel" style="grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));">
        <div class="input-group">
            <h3>Starting Position</h3>
            <input type="number" id="startX" value="0" step="0.5" class="input-field">
        </div>

        <div class="input-group">
            <h3>Learning Rate</h3>
            <input type="range" id="learningRate" min="0.01" max="1" step="0.01" value="0.1" class="input-field">
            <div style="text-align: center; margin-top: 0.5rem; color: var(--primary);">
                <span id="lrValue">0.1</span>
            </div>
        </div>

        <div class="input-group">
            <h3>Iterations</h3>
            <input type="number" id="steps" value="50" min="10" max="200" class="input-field">
        </div>

        <div class="input-group">
            <h3>Function Type</h3>
            <select id="functionType" class="input-field">
                <option value="quadratic">Quadratic (Simple)</option>
                <option value="complex">Complex (Multiple Minima)</option>
                <option value="ravine">Ravine (Oscillating)</option>
            </select>
        </div>
    </div>

    <div style="margin-top: 1.5rem; display: flex; gap: 1rem;">
        <button class="btn-primary" onclick="runGradientDescent()" style="flex: 1;">
            Run Gradient Descent
        </button>
        <button class="btn-primary" onclick="animateGradientDescent()" style="flex: 1; background: var(--secondary);">
            Animate
        </button>
    </div>
</div>

<div class="glass-card">
    <div id="gradientPlot" class="viz-container" style="height: 500px;"></div>
</div>

<div class="glass-card">
    <h3>Results</h3>
    <div id="results" style="margin-top: 1rem; display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
        <div style="padding: 1rem; background: rgba(0,0,0,0.2); border-radius: 8px;">
            <div style="color: var(--text-muted); font-size: 0.9rem;">Final Position</div>
            <div id="finalX" style="font-size: 1.5rem; color: var(--primary); margin-top: 0.5rem;">-</div>
        </div>
        <div style="padding: 1rem; background: rgba(0,0,0,0.2); border-radius: 8px;">
            <div style="color: var(--text-muted); font-size: 0.9rem;">Final Value</div>
            <div id="finalY" style="font-size: 1.5rem; color: var(--primary); margin-top: 0.5rem;">-</div>
        </div>
        <div style="padding: 1rem; background: rgba(0,0,0,0.2); border-radius: 8px;">
            <div style="color: var(--text-muted); font-size: 0.9rem;">Status</div>
            <div id="status" style="font-size: 1.5rem; color: var(--primary); margin-top: 0.5rem;">-</div>
        </div>
        <div style="padding: 1rem; background: rgba(0,0,0,0.2); border-radius: 8px;">
            <div style="color: var(--text-muted); font-size: 0.9rem;">Iterations</div>
            <div id="iterations" style="font-size: 1.5rem; color: var(--primary); margin-top: 0.5rem;">-</div>
        </div>
    </div>
</div>

<div class="glass-card">
    <h3>Understanding Gradient Descent</h3>
    <div style="margin-top: 1rem; line-height: 1.8; color: var(--text-muted);">
        <p><strong style="color: var(--text-main);">Learning Rate:</strong> Controls step size. Too small = slow convergence. Too large = overshooting or divergence.</p>
        <p><strong style="color: var(--text-main);">Gradient:</strong> The slope at current position. Tells us which direction is "downhill".</p>
        <p><strong style="color: var(--text-main);">Update Rule:</strong> x_new = x_old - learning_rate Ã— gradient</p>
        <p><strong style="color: var(--text-main);">In Neural Networks:</strong> We update millions of weights using this same principle!</p>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/visualizers/gradient.js') }}"></script>
{% endblock %}
